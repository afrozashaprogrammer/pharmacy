<!doctype html>
<html lang="en" class="h-full" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diagnostic Centre ‚Äî Management</title>

  <!-- Tailwind CDN (v4 compatible) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#7c3aed', /* purple/indigo primary */
          }
        }
      }
    }
  </script>

  <style>
    :root { --primary: #7c3aed; }

    /* Sidebar always dark regardless of theme */
    .sidebar {
      background: linear-gradient(180deg,#061026 0%,#071428 100%);
      color: #fff;
    }

    /* Custom scrollbar for sidebar only */
    .sidebar::-webkit-scrollbar { width: 10px; }
    .sidebar::-webkit-scrollbar-track { background: transparent; }
    .sidebar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 9999px; }

    /* Smooth transitions for some UI */
    .animate-fast { transition: all .18s ease; }

    /* keep header slightly translucent for nicer look */
    .header-shadow { box-shadow: 0 1px 0 rgba(0,0,0,0.06); }

    /* small screen overlay body lock */
    .offcanvas-open { overflow: hidden; }
  </style>
</head>
<body class="h-full antialiased text-slate-900 bg-slate-50 dark:text-slate-100 dark:bg-slate-900">

<!-- ============================
     SIDEBAR (ALWAYS DARK)
     - Fixed on left
     - Independent scrollbar
     - Contains brand + menu sections + collapsible menus
     ============================ -->
<aside id="sidebar"
       class="sidebar fixed inset-y-0 left-0 w-64 z-40 flex flex-col transform translate-x-0 md:translate-x-0 animate-fast"
       aria-label="Sidebar">
  <!-- Sidebar: Top Brand -->
  <div class="flex items-center gap-3 px-4 py-5 border-b border-white/6 shrink-0">
    <div class="w-10 h-10 rounded-md flex items-center justify-center bg-[color:var(--primary)] shrink-0">
      <!-- simple SVG brand -->
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 3L20 7v10l-8 4-8-4V7l8-4z" fill="#fff" opacity="0.95"/>
      </svg>
    </div>
    <div>
      <div class="text-white font-semibold text-sm">Diagno<span class="text-violet-300">Centre</span></div>
      <div class="text-xs text-white/70">Management</div>
    </div>
  </div>

  <!-- Sidebar: Navigation (scrollable independent from main content) -->
  <nav class="px-2 py-4 overflow-y-auto flex-1">
    <!-- Section: Main -->
    <div class="mb-4">
      <div class="px-2 text-xs text-white/60 uppercase tracking-wide">Main</div>
      <ul class="mt-2 space-y-1">
        <li>
          <a href="#"
             class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M3 7h18M3 12h18M3 17h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Dashboard
          </a>
        </li>

        <!-- COLLAPSIBLE: Patients -->
        <li data-collapsible>
          <button type="button"
                  class="w-full flex items-center justify-between gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white collapsible-toggle text-sm"
                  aria-expanded="false">
            <div class="flex items-center gap-3">
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M3 12h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              <span>Patients</span>
            </div>
            <svg class="w-4 h-4 transition-transform" viewBox="0 0 20 20" fill="none" stroke="currentColor"><path d="M6 8l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>

          <ul class="mt-2 ml-2 pl-2 border-l border-white/6 space-y-1 hidden collapsible-panel">
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">All Patients</a></li>
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Add Patient</a></li>
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Patient Groups</a></li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- Section: Operations -->
    <div class="mb-4">
      <div class="px-2 text-xs text-white/60 uppercase tracking-wide">Operations</div>
      <ul class="mt-2 space-y-1">
        <li><a href="#" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Appointments</a></li>
        <li><a href="#" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Tests & Reports</a></li>

        <!-- COLLAPSIBLE: Doctors -->
        <li data-collapsible>
          <button type="button"
                  class="w-full flex items-center justify-between gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white collapsible-toggle text-sm"
                  aria-expanded="false">
            <div class="flex items-center gap-3">
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none">
                <path d="M12 12c2.28 0 4-1.72 4-4s-1.72-4-4-4-4 1.72-4 4 1.72 4 4 4zm0 2c-3.33 0-6 2.67-6 6h12c0-3.33-2.67-6-6-6z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Doctors</span>
            </div>
            <svg class="w-4 h-4 transition-transform" viewBox="0 0 20 20" fill="none" stroke="currentColor"><path d="M6 8l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>

          <ul class="mt-2 ml-2 pl-2 border-l border-white/6 space-y-1 hidden collapsible-panel">
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">All Doctors</a></li>
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Add Doctor</a></li>
            <li><a href="#" class="block px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Schedules</a></li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- Section: Settings -->
    <div class="mb-4">
      <div class="px-2 text-xs text-white/60 uppercase tracking-wide">Settings</div>
      <ul class="mt-2 space-y-1">
        <li><a href="#" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Users</a></li>
        <li><a href="#" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Billing</a></li>
        <li><a href="#" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-white/6 text-white text-sm">Integrations</a></li>
      </ul>
    </div>
  </nav>

  <!-- Sidebar: footer small note -->
  <div class="px-4 py-3 border-t border-white/6 shrink-0">
    <div class="text-xs text-white/60">v1.0 ‚Ä¢ Diagnostic Centre</div>
  </div>
</aside>
<!-- Sidebar overlay used on mobile when the sidebar is open -->
<div id="overlay" class="fixed inset-0 bg-black/40 z-30 hidden md:hidden"></div>

<!-- ============================
     MAIN WRAPPER
     - main content is padded on the left for md+ to make room for sidebar
     ============================ -->
<div id="main" class="min-h-screen md:pl-64">

  <!-- ============================
       HEADER
       - left: page title
       - right: search, notification dropdown, theme toggle, profile dropdown
       - hamburger visible on small screens to open sidebar
       ============================ -->
  <header class="sticky top-0 z-20 header-shadow bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">

        <!-- Header Left: hamburger (mobile) + title -->
        <div class="flex items-center gap-4">
          <!-- Mobile: open sidebar -->
          <button id="openSidebarBtn" class="md:hidden p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700" aria-label="Open sidebar">
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>

          <div>
            <h1 id="pageTitle" class="text-lg font-semibold text-slate-900 dark:text-slate-100">Dashboard</h1>
            <p class="text-xs text-slate-500 dark:text-slate-300">Welcome back, Admin</p>
          </div>
        </div>

        <!-- Header Right: search, notifications, theme, profile -->
        <div class="flex items-center gap-3">

          <!-- Search (hidden on xs, full on md+) -->
          <div class="hidden md:block">
            <label for="search" class="sr-only">Search</label>
            <div class="relative">
              <input id="search" class="w-64 rounded-md border border-slate-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)]" placeholder="Search patients, tests, doctors..." />
              <div class="absolute right-2 top-1/2 -translate-y-1/2 text-slate-400">üîé</div>
            </div>
          </div>

          <!-- Notification dropdown -->
          <div class="relative">
            <button id="notifBtn" class="p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700" aria-expanded="false" aria-controls="notifDropdown">
              <span class="sr-only">View notifications</span>
              <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>

            <!-- notif dropdown -->
            <div id="notifDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black/5">
              <div class="px-4 py-3 border-b border-slate-100 dark:border-slate-700 font-medium">Notifications</div>
              <ul class="max-h-56 overflow-y-auto">
                <li class="px-4 py-3 border-b border-slate-100 dark:border-slate-700">
                  <div class="text-sm font-medium">New lab result</div>
                  <div class="text-xs text-slate-500 dark:text-slate-400">Patient: John Doe ‚Ä¢ 10 min ago</div>
                </li>
                <li class="px-4 py-3 border-b border-slate-100 dark:border-slate-700">
                  <div class="text-sm font-medium">Appointment reminder</div>
                  <div class="text-xs text-slate-500 dark:text-slate-400">Patient: Mary ‚Ä¢ Tomorrow 10:00</div>
                </li>
                <li class="px-4 py-3 text-center text-sm text-slate-500">No more notifications</li>
              </ul>
            </div>
          </div>

          <!-- Theme toggle (saves to localStorage) -->
          <div>
            <button id="themeToggle" class="p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700" aria-pressed="false" title="Toggle theme">
              <svg id="themeIcon" class="w-6 h-6" viewBox="0 0 24 24" fill="none">
                <!-- default icon (sun) replaced by JS according to theme -->
                <path d="M12 3v2M12 19v2M5.22 5.22l1.42 1.42M17.36 17.36l1.42 1.42M3 12h2M19 12h2M5.22 18.78l1.42-1.42M17.36 6.64l1.42-1.42M12 7a5 5 0 100 10 5 5 0 000-10z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>

          <!-- Profile dropdown -->
          <div class="relative">
            <button id="profileBtn" class="flex items-center gap-2 px-2 py-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700" aria-expanded="false" aria-controls="profileDropdown">
              <img src="https://ui-avatars.com/api/?name=Admin&background=7c3aed&color=fff&size=32" alt="Admin" class="w-8 h-8 rounded-full" />
              <span class="hidden sm:inline text-sm">Admin</span>
            </button>

            <!-- profile dropdown -->
            <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg ring-1 ring-black/5">
              <a href="#" class="flex items-center gap-2 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path d="M12 12c2.28 0 4-1.72 4-4s-1.72-4-4-4-4 1.72-4 4 1.72 4 4 4zM6 20v-1a4 4 0 014-4h4a4 4 0 014 4v1" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Profile
              </a>
              <a href="#" class="flex items-center gap-2 px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Activity
              </a>
              <div class="border-t border-slate-100 dark:border-slate-700"></div>
              <button id="logoutBtn" class="w-full text-left px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-700 text-sm">Logout</button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </header>

  <!-- ============================
       MAIN CONTENT (Dashboard)
       - starter dashboard with cards, charts placeholders, and recent reports
       ============================ -->
  <main class="py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

      <!-- Dashboard cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6">
        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">Total Patients</div>
              <div class="text-2xl font-bold">1,234</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">üë•</div>
          </div>
        </div>

        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">Appointments Today</div>
              <div class="text-2xl font-bold">56</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">üìÖ</div>
          </div>
        </div>

        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">Pending Reports</div>
              <div class="text-2xl font-bold">18</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">üî¨</div>
          </div>
        </div>

        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">Revenue Today</div>
              <div class="text-2xl font-bold">$4,320</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">üíµ</div>
          </div>
        </div>

        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">New Patients</div>
              <div class="text-2xl font-bold">34</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">üÜï</div>
          </div>
        </div>

        <div class="rounded-lg p-4 bg-white dark:bg-slate-800 shadow">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-500 dark:text-slate-300">Tests Completed</div>
              <div class="text-2xl font-bold">76</div>
            </div>
            <div class="w-12 h-12 rounded-md flex items-center justify-center" style="background:var(--primary);color:white">‚úÖ</div>
          </div>
        </div>
      </div>

      <!-- Charts + Tasks -->
      <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <section class="bg-white dark:bg-slate-800 shadow rounded-lg p-4 lg:col-span-2">
          <h2 class="text-lg font-semibold mb-4">Monthly Revenue</h2>
          <div class="h-64 bg-slate-100 dark:bg-slate-700 rounded-md flex items-center justify-center text-slate-400">[Chart placeholder]</div>
        </section>

        <section class="bg-white dark:bg-slate-800 shadow rounded-lg p-4">
          <h2 class="text-lg font-semibold mb-4">Tasks</h2>
          <ul class="space-y-2 text-sm">
            <li class="flex items-center justify-between">
              <span>Send lab reports</span>
              <span class="text-xs text-amber-600">Pending</span>
            </li>
            <li class="flex items-center justify-between">
              <span>Update inventory</span>
              <span class="text-xs text-slate-400">Done</span>
            </li>
            <li class="flex items-center justify-between">
              <span>Follow up patients</span>
              <span class="text-xs text-amber-600">Pending</span>
            </li>
          </ul>
        </section>
      </div>

      <!-- Recent reports table -->
      <section class="mt-8 bg-white dark:bg-slate-800 shadow rounded-lg p-4">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold">Recent Reports</h2>
          <a href="#" class="text-sm" style="color:var(--primary)">View all</a>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-left table-auto">
            <thead>
              <tr class="text-sm text-slate-500 dark:text-slate-300">
                <th class="px-3 py-2">Patient</th>
                <th class="px-3 py-2">Test</th>
                <th class="px-3 py-2">Date</th>
                <th class="px-3 py-2">Status</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-t border-slate-100 dark:border-slate-700">
                <td class="px-3 py-2">John Doe</td>
                <td class="px-3 py-2">Complete Blood Count</td>
                <td class="px-3 py-2">2025-11-10</td>
                <td class="px-3 py-2 text-sm text-amber-600">Ready</td>
              </tr>
              <tr class="border-t border-slate-100 dark:border-slate-700">
                <td class="px-3 py-2">Mary Jane</td>
                <td class="px-3 py-2">X-Ray Chest</td>
                <td class="px-3 py-2">2025-11-09</td>
                <td class="px-3 py-2 text-sm text-slate-400">Processing</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Quick links -->
      <section class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-white dark:bg-slate-800 shadow rounded-lg p-4 flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer">üìù Add Report</div>
        <div class="bg-white dark:bg-slate-800 shadow rounded-lg p-4 flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer">‚ûï Add Patient</div>
        <div class="bg-white dark:bg-slate-800 shadow rounded-lg p-4 flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer">üìä View Analytics</div>
      </section>

    </div>
  </main>

  <!-- ============================
       FOOTER
       - simple one-line footer
       ============================ -->
  <footer class="py-3">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-slate-500 dark:text-slate-400">¬© 2025 Diagnostic Centre ‚Äî All rights reserved</div>
  </footer>

</div>

<!-- ============================
     SCRIPTS
     - theme toggle with persistence
     - sidebar open/close (mobile)
     - collapsible menus
     - dropdown toggles (notif, profile)
     - accessible escape/close behaviour
     ============================ -->
<script>
(function () {
  const html = document.documentElement;
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const openSidebarBtn = document.getElementById('openSidebarBtn');
  const notifBtn = document.getElementById('notifBtn');
  const notifDropdown = document.getElementById('notifDropdown');
  const profileBtn = document.getElementById('profileBtn');
  const profileDropdown = document.getElementById('profileDropdown');
  const themeToggle = document.getElementById('themeToggle');
  const themeIcon = document.getElementById('themeIcon');
  const logoutBtn = document.getElementById('logoutBtn');

  const THEME_KEY = 'dc-theme'; // localStorage key

  /* --------------------------
     Theme handling (save/load)
     -------------------------- */
  function setLightIcon() {
    themeIcon.innerHTML = '<path d="M12 3v2M12 19v2M5.22 5.22l1.42 1.42M17.36 17.36l1.42 1.42M3 12h2M19 12h2M5.22 18.78l1.42-1.42M17.36 6.64l1.42-1.42M12 7a5 5 0 100 10 5 5 0 000-10z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>';
    themeToggle.setAttribute('aria-pressed', 'false');
  }
  function setDarkIcon() {
    themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>';
    themeToggle.setAttribute('aria-pressed', 'true');
  }

  function applyTheme(theme) {
    if (theme === 'dark') {
      html.classList.add('dark');
      setDarkIcon();
    } else {
      html.classList.remove('dark');
      setLightIcon();
    }
  }

  // load saved theme or system preference
  const savedTheme = localStorage.getItem(THEME_KEY);
  if (savedTheme) {
    applyTheme(savedTheme);
  } else {
    const preferDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    applyTheme(preferDark ? 'dark' : 'light');
  }

  // toggle
  themeToggle?.addEventListener('click', () => {
    const next = html.classList.contains('dark') ? 'light' : 'dark';
    applyTheme(next);
    localStorage.setItem(THEME_KEY, next);
  });

  /* --------------------------
     Sidebar open/close (mobile)
     -------------------------- */
  function openSidebar() {
    sidebar.classList.remove('-translate-x-full');
    sidebar.classList.add('translate-x-0');
    overlay.classList.remove('hidden');
    document.body.classList.add('offcanvas-open');
  }
  function closeSidebar() {
    // slide out on small screens
    sidebar.classList.add('-translate-x-full');
    overlay.classList.add('hidden');
    document.body.classList.remove('offcanvas-open');
  }

  // ensure responsive initial state
  function responsiveInit() {
    if (window.innerWidth < 768) {
      sidebar.classList.add('-translate-x-full');
    } else {
      sidebar.classList.remove('-translate-x-full');
      overlay.classList.add('hidden');
    }
  }
  responsiveInit();
  window.addEventListener('resize', responsiveInit);

  openSidebarBtn?.addEventListener('click', openSidebar);
  overlay?.addEventListener('click', closeSidebar);

  /* --------------------------
     Dropdown toggles
     -------------------------- */
  notifBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    notifDropdown.classList.toggle('hidden');
    profileDropdown.classList.add('hidden');
  });

  profileBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    profileDropdown.classList.toggle('hidden');
    notifDropdown.classList.add('hidden');
  });

  // close dropdowns when clicking outside
  document.addEventListener('click', () => {
    notifDropdown?.classList.add('hidden');
    profileDropdown?.classList.add('hidden');
  });

  // ESC closes everything
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeSidebar();
      notifDropdown?.classList.add('hidden');
      profileDropdown?.classList.add('hidden');
    }
  });

  /* --------------------------
     Collapsible menus inside sidebar
     - markup: any <li data-collapsible> with
       .collapsible-toggle and .collapsible-panel
     -------------------------- */
  document.querySelectorAll('[data-collapsible]').forEach((item) => {
    const btn = item.querySelector('.collapsible-toggle');
    const panel = item.querySelector('.collapsible-panel');
    if (!btn || !panel) return;
    btn.addEventListener('click', () => {
      const opened = !panel.classList.contains('hidden');
      if (opened) {
        panel.classList.add('hidden');
        btn.setAttribute('aria-expanded', 'false');
        const arrow = btn.querySelector('svg:last-child');
        arrow?.classList.remove('rotate-180');
      } else {
        panel.classList.remove('hidden');
        btn.setAttribute('aria-expanded', 'true');
        const arrow = btn.querySelector('svg:last-child');
        arrow?.classList.add('rotate-180');
      }
    });
  });

  /* --------------------------
     Logout demo
     -------------------------- */
  logoutBtn?.addEventListener('click', () => {
    // Replace with real logout flow
    alert('Logging out... (demo)');
  });

})();
</script>
</body>
</html>
